#+TITLE: Starter Kit C++
#+OPTIONS: toc:nil num:nil ^:nil

This is part of the [[file:starter-kit.org][Emacs Starter Kit]].

* Starter Kit C++
** Set C++ mode for *.h and *.ipp files (instead of plain-old C mode)
#+BEGIN_SRC emacs-lisp
  (setq auto-mode-alist (cons '("\\.h$"   . c++-mode) auto-mode-alist))
  (setq auto-mode-alist (cons '("\\.ipp$" . c++-mode) auto-mode-alist))
#+END_SRC

** Running starter-kit-coding-hook
#+BEGIN_SRC emacs-lisp
  (add-hook 'c-mode-common-hook 'run-starter-kit-coding-hook)
#+END_SRC
** Un/fold function/namespace definitions
#+BEGIN_SRC emacs-lisp
  (add-hook 'c-mode-common-hook
            (lambda ()
              (local-set-key (kbd "<s-right>") 'hs-show-block)
              (local-set-key (kbd "<s-left>")  'hs-hide-block)
              (local-set-key (kbd "<s-up>")    'hs-hide-all)
              (local-set-key (kbd "<s-down>")  'hs-show-all)
              ;; hungry delete
              ;;(c-toggle-hungry-state t)
              (hs-minor-mode   t)
              (whitespace-mode t)))
#+END_SRC

** Compilation
*** Scroll down compilation messages
#+BEGIN_SRC emacs-lisp
  (setq compilation-scroll-output t)
#+END_SRC

*** Send notification when compilation is done
#+BEGIN_SRC emacs-lisp
  (defun compile-notify (buffer message)
    (sk-popup "Emacs compilation" message))
  (setq compilation-finish-function 'compile-notify)
#+END_SRC
** Tags
The following code makes use to =etags= program to generate a list of tags and
to ease the code navigation.

*** Create TAGS table
#+BEGIN_SRC emacs-lisp
  (defun sk-create-tags (dirname)
    "Create tags file."
    (interactive "DDirectory: ")
    (shell-command
     (format "find %s -type f \\( -name '*.cc' -o -name '*.h' \\) | grep -v '__' | grep -v '/devel/' | etags - && mv %s/TAGS %s/." dirname default-directory temporary-file-directory)))
#+END_SRC

Use this function to create TAGS related to SN@ailWare software.
#+BEGIN_SRC emacs-lisp
  (defun sk-create-snailware-tags ()
    "Create SN@ilWare tags file."
    (interactive)
    (sk-create-tags "$SNAILWARE_DEV_DIR"))
#+END_SRC

*** Set TAGS filename
#+BEGIN_SRC emacs-lisp
  (setq tags-file-name (concat temporary-file-directory "TAGS"))
#+END_SRC
